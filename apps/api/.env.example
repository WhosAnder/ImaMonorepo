# =================================
# API Service Environment Configuration
# =================================

# Server Configuration
# Environment mode (development/production)
# Default: development
NODE_ENV=development

# Server port
# Default: 4000
PORT=4000

# Database Configuration
# MongoDB connection string
# Default: mongodb://localhost:27017
MONGODB_URL=mongodb://localhost:27017

# MongoDB database name
# Default: ima
MONGODB_DB_NAME=ima

# Auth Service Integration (REQUIRED for session validation)
# URL for the authentication service to validate admin sessions
# The API service forwards session cookies to this URL for validation
# IMPORTANT: Must match the BETTER_AUTH_URL of the auth service
# Examples:
#   Local: http://localhost:5001
#   Railway: https://auth-production-xxxx.up.railway.app
#   Custom: https://auth.domain.com
# Default: http://localhost:5001
AUTH_SERVICE_URL=http://localhost:5001

# =================================
# CORS Configuration
# =================================

# Comma-separated list of allowed origins for CORS
# These origins will be allowed to make requests to the API service
# IMPORTANT: Must include your frontend URL
# Examples:
#   Local: http://localhost:3000
#   Railway: https://web-production-xxxx.up.railway.app
#   Custom: https://domain.com
# Default: http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000

# =================================
# Deduplication / Idempotency Settings
# =================================

# Enable/disable idempotency middleware for preventing duplicate submissions
# Set to "false" to disable, any other value or omitting enables it
# Default: true
DEDUPLICATION_ENABLED=true

# Time-to-live for deduplication records (in hours)
# Default: 24
DEDUPLICATION_TTL_HOURS=24

# =================================
# AWS S3 Configuration (Evidences Bucket)
# =================================

# AWS/S3-compatible storage region
# You can use either AWS_REGION or S3_REGION (aliases)
# Default: auto
AWS_REGION=auto
S3_REGION=auto

# AWS/S3 access key ID for evidences bucket
# You can use either AWS_ACCESS_KEY_ID or S3_ACCESS_KEY_ID (aliases)
AWS_ACCESS_KEY_ID=your_access_key_id
S3_ACCESS_KEY_ID=your_access_key_id

# AWS/S3 secret access key for evidences bucket
# You can use either AWS_SECRET_ACCESS_KEY or S3_SECRET_ACCESS_KEY (aliases)
AWS_SECRET_ACCESS_KEY=your_secret_access_key
S3_SECRET_ACCESS_KEY=your_secret_access_key

# S3 bucket name for storing evidence files (images, videos)
S3_BUCKET=your-evidences-bucket-name

# S3-compatible endpoint URL (Railway Storage, MinIO, etc.)
# You can use AWS_S3_ENDPOINT, S3_ENDPOINT, or AWS_ENDPOINT (aliases)
AWS_S3_ENDPOINT=https://storage.railway.app
S3_ENDPOINT=https://storage.railway.app
AWS_ENDPOINT=https://storage.railway.app

# =================================
# File Upload Settings
# =================================

# Maximum file size for evidence uploads (in megabytes)
# You can use either EVIDENCES_MAX_SIZE_MB or FILES_MAX_SIZE_MB (aliases)
# Default: 20
EVIDENCES_MAX_SIZE_MB=20
FILES_MAX_SIZE_MB=20

# Comma-separated list of allowed MIME types for evidence files
# You can use either EVIDENCES_ALLOWED_MIME or FILES_ALLOWED_MIME (aliases)
# Default: image/png,image/jpeg,image/webp
EVIDENCES_ALLOWED_MIME=image/png,image/jpeg,image/webp
FILES_ALLOWED_MIME=image/png,image/jpeg,image/webp

# =================================
# AWS S3 Configuration (Signatures Bucket - Optional)
# =================================

# Separate S3 bucket for storing signature images
# Optional: Only needed if you want to store signatures in a different bucket
S3_SIGNATURES_BUCKET=your-signatures-bucket-name

# Access key ID for signatures bucket
# Optional: Defaults to AWS_ACCESS_KEY_ID if not set
S3_SIGNATURES_ACCESS_KEY_ID=your_signatures_access_key_id

# Secret access key for signatures bucket
# Optional: Defaults to AWS_SECRET_ACCESS_KEY if not set
S3_SIGNATURES_SECRET_ACCESS_KEY=your_signatures_secret_key

# Endpoint for signatures bucket
# Optional: Defaults to AWS_S3_ENDPOINT if not set
S3_SIGNATURES_ENDPOINT=https://storage.railway.app

# Region for signatures bucket
# Optional: Defaults to AWS_REGION if not set
S3_SIGNATURES_REGION=auto

# =================================
# Local Development (when not using S3)
# =================================

# Base URL for constructing local file upload URLs (development/local mode)
# Only used when Multer adapter is active (non-S3 storage)
# Uncomment if running without S3
# BASE_URL=http://localhost:3000
